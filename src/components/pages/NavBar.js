import React, { useState } from "react";
import { useNavigate } from "react-router-dom";
import { useSelector } from "react-redux";

import "../NavBar.css";
import UserProfileIcon from '../images/user_profile_icon.png'; 

const NavBar = () => {  
  const [menuOpen, setMenuOpen] = useState(false);
  const navigate = useNavigate();
  const loggedIn = useSelector((state) => state.auth.loggedIn);
  const userName = useSelector((state) => loggedIn ? state.auth.user.firstName + " " + state.auth.user.lastName : "");

  const handleNavigate = () => {
    setMenuOpen(false);
    navigate(loggedIn ? "/login" : "/dashboard");
  };
  
  return (
    <nav>
      <Logo />

      <div className="menu" onClick={() => setMenuOpen(!menuOpen)}>
        <span></span>
        <span></span>
        <span></span>
      </div>

      <ul className={menuOpen ? "open" : ""}>
        <li>          
          <div className="user-data">
            <div className="user-avatar">
              {loggedIn ? <img src={UserProfileIcon} alt="UserIcon"/> : ""}
            </div>
            <div className="user-name">{userName}</div>
          </div>
        </li>

        <li>
          <button onClick={handleNavigate} className="links signIn">
            {loggedIn ? "Log out" : "Sign in" }
          </button>
        </li>
      </ul>
    </nav>
  );
};

const Logo = () => (
  <svg width="258" height="116" viewBox="0 0 258 116" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M123.666 65.456C121.715 65.456 119.993 65.1267 118.498 64.468C117.003 63.784 115.825 62.8213 114.964 61.58C114.103 60.3133 113.659 58.7807 113.634 56.982H118.764C118.815 58.2233 119.258 59.2747 120.094 60.136C120.955 60.972 122.133 61.39 123.628 61.39C124.92 61.39 125.946 61.086 126.706 60.478C127.466 59.8447 127.846 59.0087 127.846 57.97C127.846 56.8807 127.504 56.032 126.82 55.424C126.161 54.816 125.275 54.322 124.16 53.942C123.045 53.562 121.855 53.1567 120.588 52.726C118.536 52.0167 116.965 51.1047 115.876 49.99C114.812 48.8753 114.28 47.3933 114.28 45.544C114.255 43.9733 114.622 42.6307 115.382 41.516C116.167 40.376 117.231 39.502 118.574 38.894C119.917 38.2607 121.462 37.944 123.21 37.944C124.983 37.944 126.541 38.2607 127.884 38.894C129.252 39.5273 130.316 40.414 131.076 41.554C131.861 42.694 132.279 44.0493 132.33 45.62H127.124C127.099 44.6827 126.731 43.8593 126.022 43.15C125.338 42.4153 124.375 42.048 123.134 42.048C122.07 42.0227 121.171 42.2887 120.436 42.846C119.727 43.378 119.372 44.1633 119.372 45.202C119.372 46.0887 119.651 46.798 120.208 47.33C120.765 47.8367 121.525 48.2673 122.488 48.622C123.451 48.9767 124.553 49.3567 125.794 49.762C127.111 50.218 128.315 50.75 129.404 51.358C130.493 51.966 131.367 52.7767 132.026 53.79C132.685 54.778 133.014 56.0573 133.014 57.628C133.014 59.0213 132.659 60.3133 131.95 61.504C131.241 62.6947 130.189 63.6573 128.796 64.392C127.403 65.1013 125.693 65.456 123.666 65.456ZM145.542 65C143.566 65 141.982 64.5187 140.792 63.556C139.601 62.5933 139.006 60.8833 139.006 58.426V50.218H135.776V46.152H139.006L139.576 41.098H143.87V46.152H148.962V50.218H143.87V58.464C143.87 59.376 144.06 60.0093 144.44 60.364C144.845 60.6933 145.529 60.858 146.492 60.858H148.848V65H145.542ZM160.206 65.456C157.85 65.456 156.026 64.7213 154.734 63.252C153.467 61.7827 152.834 59.6293 152.834 56.792V46.152H157.66V56.336C157.66 57.9573 157.989 59.1987 158.648 60.06C159.307 60.9213 160.345 61.352 161.764 61.352C163.107 61.352 164.209 60.8707 165.07 59.908C165.957 58.9453 166.4 57.6027 166.4 55.88V46.152H171.264V65H166.97L166.59 61.808C166.007 62.9227 165.159 63.8093 164.044 64.468C162.955 65.1267 161.675 65.456 160.206 65.456ZM184.921 65.456C183.148 65.456 181.564 65.0253 180.171 64.164C178.778 63.3027 177.676 62.1247 176.865 60.63C176.054 59.1353 175.649 57.438 175.649 55.538C175.649 53.638 176.054 51.9533 176.865 50.484C177.676 48.9893 178.778 47.824 180.171 46.988C181.564 46.1267 183.148 45.696 184.921 45.696C186.34 45.696 187.581 45.962 188.645 46.494C189.709 47.026 190.57 47.7733 191.229 48.736V37.64H196.093V65H191.761L191.229 62.302C190.621 63.138 189.81 63.8727 188.797 64.506C187.809 65.1393 186.517 65.456 184.921 65.456ZM185.947 61.2C187.518 61.2 188.797 60.6807 189.785 59.642C190.798 58.578 191.305 57.2227 191.305 55.576C191.305 53.9293 190.798 52.5867 189.785 51.548C188.797 50.484 187.518 49.952 185.947 49.952C184.402 49.952 183.122 50.4713 182.109 51.51C181.096 52.5487 180.589 53.8913 180.589 55.538C180.589 57.1847 181.096 58.54 182.109 59.604C183.122 60.668 184.402 61.2 185.947 61.2ZM203.402 73.36L207.772 63.746H206.632L199.298 46.152H204.58L209.862 59.414L215.372 46.152H220.54L208.57 73.36H203.402ZM222.124 65L231.852 38.4H237.324L247.052 65H241.884L239.756 58.844H229.382L227.216 65H222.124ZM230.712 55.044H238.426L234.55 43.986L230.712 55.044ZM250.479 65V38.4H255.343V65H250.479Z" fill="#545090"/>
    <g filter="url(#filter0_d_7_622)">
      <rect x="20" y="14" width="76" height="76" rx="23.8974" fill="white"/>
    </g>
    <path d="M39.7533 44.5745C39.6159 44.1655 39.8361 43.7225 40.2451 43.5852L57.086 37.929C57.495 37.7916 57.9379 38.0119 58.0753 38.4209L65.4545 60.3919C65.5918 60.8009 65.3716 61.2439 64.9626 61.3812L48.1217 67.0374C47.7127 67.1748 47.2698 66.9545 47.1324 66.5455L39.7533 44.5745Z" fill="#545090"/>
    <path d="M37.8206 43.6081C37.6833 43.1991 37.9035 42.7561 38.3125 42.6188L55.1534 36.9626C55.5624 36.8252 56.0053 37.0455 56.1427 37.4545L63.5218 59.4255C63.6592 59.8345 63.439 60.2775 63.03 60.4148L46.1891 66.071C45.7801 66.2084 45.3372 65.9881 45.1998 65.5791L37.8206 43.6081Z" fill="white"/>
    <path fillRule="evenodd" clipRule="evenodd" d="M38.0637 41.8782L54.9046 36.222C55.7226 35.9473 56.6085 36.3877 56.8832 37.2057L64.2624 59.1768C64.5371 59.9948 64.0967 60.8807 63.2787 61.1554L46.4378 66.8116C45.6198 67.0863 44.7339 66.6459 44.4591 65.8279L37.08 43.8568C36.8052 43.0388 37.2457 42.1529 38.0637 41.8782ZM38.3124 42.6188C37.9034 42.7561 37.6832 43.1991 37.8206 43.6081L45.1997 65.5791C45.3371 65.9881 45.7801 66.2084 46.1891 66.071L63.0299 60.4148C63.4389 60.2775 63.6592 59.8345 63.5218 59.4255L56.1426 37.4545C56.0053 37.0455 55.5623 36.8252 55.1533 36.9626L38.3124 42.6188Z" fill="#545090"/>
    <path fillRule="evenodd" clipRule="evenodd" d="M42.8637 46.799C42.795 46.5945 42.9051 46.373 43.1096 46.3043L53.1409 42.9352C53.3455 42.8665 53.5669 42.9766 53.6356 43.1811C53.7043 43.3856 53.5942 43.6071 53.3897 43.6758L43.3584 47.0449C43.1539 47.1136 42.9324 47.0035 42.8637 46.799Z" fill="#545090"/>
    <path fillRule="evenodd" clipRule="evenodd" d="M43.6636 49.1809C43.5949 48.9764 43.705 48.7549 43.9095 48.6862L53.9408 45.3171C54.1453 45.2484 54.3668 45.3585 54.4355 45.563C54.5042 45.7675 54.3941 45.989 54.1896 46.0577L44.1582 49.4268C43.9537 49.4955 43.7323 49.3854 43.6636 49.1809Z" fill="#545090"/>
    <path fillRule="evenodd" clipRule="evenodd" d="M44.4638 51.5628C44.3951 51.3583 44.5052 51.1368 44.7097 51.0681L54.741 47.699C54.9455 47.6304 55.167 47.7405 55.2357 47.945C55.3044 48.1495 55.1942 48.3709 54.9897 48.4396L44.9584 51.8087C44.7539 51.8774 44.5324 51.7673 44.4638 51.5628Z" fill="#545090"/>
    <path fillRule="evenodd" clipRule="evenodd" d="M45.2636 53.9447C45.195 53.7401 45.3051 53.5187 45.5096 53.45L55.5409 50.0809C55.7454 50.0122 55.9669 50.1223 56.0356 50.3268C56.1042 50.5313 55.9941 50.7528 55.7896 50.8215L45.7583 54.1906C45.5538 54.2593 45.3323 54.1492 45.2636 53.9447Z" fill="#545090"/>
    <path fillRule="evenodd" clipRule="evenodd" d="M46.0635 56.3265C45.9948 56.122 46.105 55.9005 46.3095 55.8318L56.3408 52.4627C56.5453 52.394 56.7668 52.5041 56.8355 52.7086C56.9041 52.9131 56.794 53.1346 56.5895 53.2033L46.5582 56.5724C46.3537 56.6411 46.1322 56.531 46.0635 56.3265Z" fill="#545090"/>
    <path fillRule="evenodd" clipRule="evenodd" d="M51.6538 57.0962C51.7227 57.3007 51.6127 57.5222 51.4082 57.591L47.3583 58.9542C47.1539 59.023 46.9323 58.9131 46.8635 58.7086C46.7947 58.5041 46.9046 58.2826 47.1091 58.2138L51.159 56.8506C51.3635 56.7818 51.585 56.8917 51.6538 57.0962Z" fill="#545090"/>
    <path d="M59.5775 38.4105C59.6912 37.9943 60.1207 37.749 60.537 37.8627L77.6747 42.5431C78.0909 42.6568 78.3362 43.0863 78.2225 43.5026L72.1163 65.8608C72.0026 66.2771 71.573 66.5223 71.1568 66.4087L54.0191 61.7283C53.6029 61.6146 53.3576 61.185 53.4713 60.7688L59.5775 38.4105Z" fill="white"/>
    <path fillRule="evenodd" clipRule="evenodd" d="M60.7428 37.109L77.8805 41.7894C78.7129 42.0168 79.2035 42.8759 78.9761 43.7084L72.8699 66.0667C72.6426 66.8991 71.7834 67.3897 70.951 67.1623L53.8133 62.4819C52.9808 62.2546 52.4903 61.3954 52.7176 60.563L58.8238 38.2047C59.0512 37.3722 59.9103 36.8817 60.7428 37.109ZM60.5369 37.8627C60.1207 37.749 59.6911 37.9943 59.5775 38.4105L53.4713 60.7688C53.3576 61.185 53.6029 61.6146 54.0191 61.7283L71.1568 66.4087C71.573 66.5223 72.0026 66.2771 72.1163 65.8608L78.2225 43.5026C78.3361 43.0863 78.0909 42.6568 77.6746 42.5431L60.5369 37.8627Z" fill="#545090"/>
    <path fillRule="evenodd" clipRule="evenodd" d="M67.9369 57.9135C68.0878 57.9562 68.1985 58.085 68.2181 58.2406L68.7005 62.077C68.7275 62.291 68.5758 62.4864 68.3617 62.5133C68.1477 62.5402 67.9523 62.3885 67.9254 62.1745L67.5579 59.2524L65.6946 61.5721C65.5595 61.7403 65.3137 61.7671 65.1455 61.632C64.9773 61.4969 64.9504 61.251 65.0856 61.0828L67.526 58.0447C67.6242 57.9224 67.786 57.8708 67.9369 57.9135Z" fill="#545090"/>
    <path fillRule="evenodd" clipRule="evenodd" d="M66.1007 59.9713C66.1575 59.7632 66.3723 59.6405 66.5804 59.6974L68.2105 60.1425C68.4186 60.1994 68.5413 60.4142 68.4844 60.6223C68.4276 60.8304 68.2128 60.953 68.0047 60.8962L66.3746 60.451C66.1665 60.3942 66.0439 60.1794 66.1007 59.9713Z" fill="#545090"/>
    <path fillRule="evenodd" clipRule="evenodd" d="M70.2794 60.0129C70.4875 60.0698 70.6102 60.2846 70.5533 60.4927L70.2463 61.6169C70.1895 61.825 69.9747 61.9476 69.7666 61.8908C69.5585 61.8339 69.4358 61.6192 69.4927 61.411L69.7997 60.2869C69.8565 60.0787 70.0713 59.9561 70.2794 60.0129Z" fill="#545090"/>
    <path fillRule="evenodd" clipRule="evenodd" d="M70.9618 61.2082C70.9049 61.4163 70.6902 61.5389 70.482 61.4821L69.3579 61.1751C69.1498 61.1182 69.0271 60.9035 69.084 60.6953C69.1408 60.4872 69.3556 60.3646 69.5637 60.4214L70.6879 60.7284C70.896 60.7853 71.0186 61.0001 70.9618 61.2082Z" fill="#545090"/>
    <path d="M70.9618 50.8492C71.3023 50.6548 71.4208 50.2211 71.2263 49.8806C71.0319 49.5401 70.5982 49.4216 70.2577 49.616L66.0842 51.999C65.7095 52.2129 65.2323 52.0826 65.0184 51.7079L63.6826 49.3683C63.4881 49.0277 63.0545 48.9093 62.7139 49.1037C62.3734 49.2982 62.255 49.7318 62.4494 50.0724L64.1721 53.0896C64.1724 53.09 64.1722 53.0906 64.1717 53.0909C64.1713 53.0912 64.1711 53.0918 64.1714 53.0922L64.8745 54.3237C64.8748 54.3242 64.8754 54.3243 64.8758 54.3241L64.8758 54.3241C64.8763 54.3238 64.8769 54.324 64.8771 54.3244C64.8774 54.3249 64.878 54.325 64.8784 54.3248L66.11 53.6216C66.1104 53.6214 66.1106 53.6208 66.1103 53.6203C66.1101 53.6199 66.1102 53.6193 66.1107 53.619L70.9618 50.8492Z" fill="white"/>
    <path fillRule="evenodd" clipRule="evenodd" d="M65.6968 51.3205L69.8704 48.9376C70.5856 48.5292 71.4964 48.778 71.9048 49.4932C72.3132 50.2085 72.0644 51.1193 71.3492 51.5277L66.5441 54.2712C66.5289 54.2813 66.5134 54.2909 66.4973 54.3001L65.2658 55.0032C65.0797 55.1095 64.8683 55.1309 64.6763 55.0797C64.4804 55.0282 64.3045 54.9009 64.1961 54.7111L63.4929 53.4796C63.4837 53.4634 63.4751 53.447 63.4671 53.4305L61.7709 50.4598C61.3626 49.7445 61.6113 48.8337 62.3266 48.4253C63.0418 48.0169 63.9527 48.2657 64.361 48.9809L65.6968 51.3205ZM71.2264 49.8806C71.4208 50.2211 71.3024 50.6548 70.9618 50.8492L66.1107 53.619C66.1102 53.6193 66.1101 53.6199 66.1103 53.6203C66.1104 53.6205 66.1105 53.6207 66.1104 53.6209C66.1104 53.6212 66.1103 53.6215 66.11 53.6216L64.8784 54.3248C64.878 54.325 64.8774 54.3249 64.8771 54.3244C64.8769 54.324 64.8763 54.3238 64.8759 54.3241L64.8758 54.3241C64.8754 54.3244 64.8748 54.3242 64.8745 54.3237L64.1714 53.0922C64.1711 53.0918 64.1713 53.0912 64.1717 53.0909C64.1722 53.0907 64.1724 53.0901 64.1721 53.0896L62.4494 50.0724C62.255 49.7319 62.3734 49.2982 62.7139 49.1038C63.0545 48.9093 63.4881 49.0278 63.6826 49.3683L65.0184 51.7079C65.2323 52.0826 65.7095 52.2129 66.0842 51.999L70.2577 49.6161C70.5983 49.4216 71.0319 49.5401 71.2264 49.8806Z" fill="#545090"/>
    <defs>
      <filter id="filter0_d_7_622" x="0" y="0" width="116" height="116" filterUnits="userSpaceOnUse" colorInterpolationFilters="sRGB">
      <feFlood floodOpacity="0" result="BackgroundImageFix"/>
      <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
      <feOffset dy="6"/>
      <feGaussianBlur stdDeviation="10"/>
      <feComposite in2="hardAlpha" operator="out"/>
      <feColorMatrix type="matrix" values="0 0 0 0 0.290196 0 0 0 0 0.227451 0 0 0 0 1 0 0 0 0.08 0"/>
      <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_7_622"/>
      <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_7_622" result="shape"/>
      </filter>
    </defs>
  </svg>
);

export default NavBar;